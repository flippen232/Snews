<!DOCTYPE html>

<html lang="no">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Snews ‚Äì Snusnyheter og Anbefalinger</title>
<style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #fdf5e6;
      color: #2e2a23;
    }

    header {
      background-color: #3e5f3e;
      color: white;
      padding: 20px;
      text-align: center;
    }

    header img {
      width: 60px;
      vertical-align: middle;
    }

    header h1 {
      display: inline;
      margin-left: 10px;
      font-size: 32px;
      vertical-align: middle;
    }

    nav {
      background-color: #5c3b1e;
      padding: 10px;
      text-align: center;
    }

    nav a {
      color: white;
      text-decoration: none;
      margin: 0 15px;
      font-weight: bold;
    }

    .container {
      max-width: 1000px;
      margin: auto;
      padding: 20px;
    }

    .section {
      margin-bottom: 40px;
    }

    h2 {
      color: #3e5f3e;
    }

    .snus-card, .fun-fact {
      background-color: #fff;
      border-left: 5px solid #5c3b1e;
      padding: 15px;
      margin: 15px 0;
      display: flex;
      align-items: center;
    }

    .snus-card img, .fun-fact img {
      width: 80px;
      height: 80px;
      margin-right: 15px;
      border-radius: 6px;
      object-fit: cover;
    }

    label, input, select, textarea {
      display: block;
      margin-top: 10px;
      width: 100%;
    }

    input[type="submit"], button {
      background-color: #3e5f3e;
      color: white;
      padding: 10px;
      border: none;
      margin-top: 10px;
      cursor: pointer;
    }

    #reviewsContainer {
      margin-top: 20px;
    }

    footer {
      text-align: center;
      padding: 20px;
      background-color: #5c3b1e;
      color: white;
    }

    /* SnusNiklas styles */
    #chatbot {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      max-height: 400px;
      background-color: #fff;
      border: 2px solid #3e5f3e;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: 9999;
    }

    #chat-header {
      background-color: #3e5f3e;
      color: white;
      padding: 10px;
      font-weight: bold;
    }

    #chat-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      font-size: 14px;
    }

    #chat-input {
      display: flex;
      border-top: 1px solid #ccc;
    }

    #chat-input input {
      flex: 1;
      padding: 8px;
      border: none;
      outline: none;
    }

    #chat-input button {
      background-color: #3e5f3e;
      color: white;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
    }

    .bot {
      margin-bottom: 10px;
      color: #3e5f3e;
    }

    .user {
      margin-bottom: 10px;
      text-align: right;
      color: #222;
    }
  </style>
</head>
<body>
<header>
<img alt="Snews logo" src="logo.png"/>
<h1>SNEWS</h1>
<p>Nyheter om snus ‚Äì vurderinger og anbefalinger</p>
</header>
<nav>
<a href="#">Hjem</a>
<a href="#">Anbefalinger</a>
<a href="#">Rate Snus</a>
<a href="#">Fun Facts</a>
</nav>
<div class="container">
<section class="section">
<h2>Snusanbefalinger</h2>
<div class="snus-card">
<img alt="LYFT" src="lyft.png"/>
<div>
<strong>LYFT Cool Mint</strong>
<p>Frisk mintsmak uten tobakk ‚Äì passer for deg som liker en kj√∏lig opplevelse.</p>
</div>
</div>
<div class="snus-card">
<img alt="General" src="general.png"/>
<div>
<strong>General Classic Portion</strong>
<p>En balansert og tradisjonell smak ‚Äì popul√¶r blant de som liker klassisk tobakk.</p>
</div>
</div>
</section>
<section class="section">
<h2>Rate din snus</h2>
<form id="reviewForm">
<label for="name">Navn:</label>
<input id="name" name="name" required="" type="text"/>
<label for="snus">Snus:</label>
<input id="snus" name="snus" required="" type="text"/>
<label for="rating">Vurdering (1-5):</label>
<input id="rating" max="5" min="1" name="rating" required="" type="number"/>
<label for="comment">Kommentar:</label>
<textarea id="comment" name="comment" placeholder="Valgfritt..." rows="3"></textarea>
<button type="submit">Send vurdering</button>
</form>
<div id="reviewsContainer"></div>
</section>
<section class="section">
<h2>Fun Facts</h2>
<div class="fun-fact">
<img alt="Snus og myr" src="fact1.png"/>
<p>En mann overlevde √• sitte fast i en myr i 3 dager ‚Äì han hadde kun snus!</p>
</div>
<div class="fun-fact">
<img alt="Killa snus" src="fact2.png"/>
<p>Killa Grape Ice er en av de mest popul√¶re smaksvariantene blant unge voksne.</p>
</div>
<div class="fun-fact">
<img alt="Velo" src="fact3.png"/>
<p>Velo Freezing Peppermint er kjent for sin sterke mentoleffekt ‚Äì ikke for nybegynnere!</p>
</div>
</section>
</div>
<footer>
  ¬© 2025 Snews ‚Äì Alle rettigheter forbeholdt
</footer>
<!-- SnusNiklas Chatbot -->
<div id="chatbot">
<div id="chat-header"><img alt="Avatar" src="snusniklas_avatar3.png" style="width:24px; height:24px; border-radius:50%; vertical-align:middle; margin-right:8px;"/>üí¨ SnusNiklas</div>
<div id="chat-messages">
<div class="bot">Hei! Jeg er SnusNiklas üòé Sp√∏r meg om snus!</div>
</div>
<div id="chat-input">
<input id="userInput" placeholder="Skriv noe..." type="text"/>
<button onclick="sendMessage()">Send</button>
</div>
</div>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, serverTimestamp, query, orderBy } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBhLdO3fAfOXBpPNNMaDBTVDaxVCTTOZRU",
    authDomain: "snewsapp-c5b21.firebaseapp.com",
    projectId: "snewsapp-c5b21",
    storageBucket: "snewsapp-c5b21.appspot.com",
    messagingSenderId: "316530833158",
    appId: "1:316530833158:web:aca388ff1928faab4d1087",
    measurementId: "G-GMVTCMEPD0"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const form = document.getElementById('reviewForm');
  const reviewsContainer = document.getElementById('reviewsContainer');

  async function loadReviews() {
    reviewsContainer.innerHTML = "<h3>Alle vurderinger:</h3>";
    const q = query(collection(db, "reviews"), orderBy("timestamp", "desc"));
    const querySnapshot = await getDocs(q);
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      const review = document.createElement("div");
      review.innerHTML = `<strong>${data.name}</strong> om <em>${data.snus}</em>: ${"‚òÖ".repeat(data.rating)}<br>${data.comment ? '"' + data.comment + '"' : ""}<hr>`;
      reviewsContainer.appendChild(review);
    });
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = form.name.value.trim();
    const snus = form.snus.value.trim();
    const rating = parseInt(form.rating.value);
    const comment = form.comment.value.trim();

    if (!name || !snus || rating < 1 || rating > 5) {
      alert("Fyll ut alle p√•krevde felter.");
      return;
    }

    await addDoc(collection(db, "reviews"), {
      name,
      snus,
      rating,
      comment,
      timestamp: serverTimestamp()
    });

    form.reset();
    loadReviews();
  });

  loadReviews();
</script>
<script>
  function sendMessage() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if (!text) return;

    addMessage("user", text);
    input.value = "";

    setTimeout(() => {
      const response = getSnusniklasResponse(text);
      addMessage("bot", response);
    }, 600);
  }

  function addMessage(type, message) {
    const chat = document.getElementById("chat-messages");
    const div = document.createElement("div");
    div.className = type;
    div.innerHTML = `<img src='snusniklas_avatar3.png' style='width:20px; height:20px; border-radius:50%; vertical-align:middle; margin-right:5px;'> ${message}`;
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }

  function getSnusniklasResponse(input) {
    input = input.toLowerCase();
    if (input.includes("sterk")) return "Sterkeste? Hah, pr√∏v Siberia. Men hold deg fast! üí•";
    if (input.includes("mint")) return "Da ville jeg g√•tt for LYFT Freeze eller VELO Ice Cool ‚ùÑÔ∏è";
    if (input.includes("forskjell")) return "White er t√∏rrere enn original ‚Äì og mindre s√∏l. Enkelt og greit!";
    if (input.includes("beste")) return "Den beste snusen? Det er som √• sp√∏rre hvilken pizza som er best ‚Äì smak og behag, kompis!";
    return "Oi, det vet jeg ikke... kanskje jeg m√• ta en snus og tenke litt ü§î";
  }
</script>
<style>
#snusniklas-chat-toggle {
    position: fixed;
    bottom: 80px;
    right: 20px;
    z-index: 9999;
    background-color: #5e4b3c;
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    font-size: 24px;
    cursor: pointer;
}
</style>
<button id="snusniklas-chat-toggle">‚Äì</button>
<script>
const toggleBtn = document.getElementById('snusniklas-chat-toggle');
const chatBox = document.getElementById('chat-container');
let chatVisible = true;

toggleBtn.onclick = () => {
    if (chatVisible) {
        chatBox.style.display = 'none';
        toggleBtn.textContent = '+';
    } else {
        chatBox.style.display = 'block';
        toggleBtn.textContent = '‚Äì';
    }
    chatVisible = !chatVisible;
};
</script>
</body>
</html>
