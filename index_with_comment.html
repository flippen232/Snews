
<!-- Legg til i skjemaet i index.html -->
<form id="reviewForm">
  <label for="name">Navn:</label><br>
  <input type="text" id="name" name="name" required><br><br>

  <label for="snus">Snus:</label><br>
  <input type="text" id="snus" name="snus" required><br><br>

  <label for="rating">Vurdering (1-5):</label><br>
  <input type="number" id="rating" name="rating" min="1" max="5" required><br><br>

  <label for="comment">Kommentar:</label><br>
  <textarea id="comment" name="comment" rows="3" cols="30" placeholder="Valgfritt..."></textarea><br><br>

  <button type="submit">Send vurdering</button>
</form>

<!-- Legg til i JavaScript-delen for innsending -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBhLdO3fAfOXBpPNNMaDBTVDaxVCTTOZRU",
    authDomain: "snewsapp-c5b21.firebaseapp.com",
    projectId: "snewsapp-c5b21",
    storageBucket: "snewsapp-c5b21.appspot.com",
    messagingSenderId: "316530833158",
    appId: "1:316530833158:web:aca388ff1928faab4d1087",
    measurementId: "G-GMVTCMEPD0"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const form = document.getElementById('reviewForm');
  const reviewsContainer = document.getElementById('reviewsContainer');

  async function loadReviews() {
    const querySnapshot = await getDocs(collection(db, "reviews"));
    reviewsContainer.innerHTML = "";
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      const review = document.createElement("div");
      review.innerHTML = `<strong>${data.name}</strong> vurderte <em>${data.snus}</em> til ${data.rating}/5<br>${data.comment ? `"${data.comment}"` : ""}<hr>`;
      reviewsContainer.appendChild(review);
    });
  }

  loadReviews();

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const name = form.name.value.trim();
    const snus = form.snus.value.trim();
    const rating = parseInt(form.rating.value);
    const comment = form.comment.value.trim();

    if (!name || !snus || rating < 1 || rating > 5) {
      alert("Fyll ut alle p√•krevde felter.");
      return;
    }

    await addDoc(collection(db, "reviews"), {
      name,
      snus,
      rating,
      comment
    });

    form.reset();
    loadReviews();
  });
</script>
<div id="reviewsContainer"></div>
